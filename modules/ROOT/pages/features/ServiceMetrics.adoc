= Metrics

:description: SIP3 Metrics.

== Overview

Nowadays every DevOps and Service Reliability Engineer is familiar with the link:[Visibility] concept. Often times Visibility starts with the ability of the maintenance team to react immediately on any service disruption. That is why it is very important to design your system having proper monitoring tools in mind. // TODO - Need a better statement backup

This document will get you in touch with the http://micrometer.io/[Micrometer], framework which allows SIP3 to ship metrics to different backends. Also, below you can find a list of all avaialble Service Metrics.

== Micrometer

TODO
- expensive to bring another monitoring tool for the support team;
- we want to give them service metrics whilte utilizing their own backend;
- micrometer is the tool of choice to deliver those metrics to many different backends
- SIP is utilizing Micrometer's metric types

== SIP Metrics

The list below contains entire set of SIP QoS metrics aggregated and reported by SIP3. You can use it to retrieve the most important QoS metrics described in RFC 6076.


[%header,cols=4*]
|====================
|Name
|Type
|Tags
|Description

|`sip_call_messages`
|Counter
|`src_host`, `dst_host`, `cseq_method`, `method`, `status_code`, `status_type`
|Call messages

|`sip_call_attempts`
|Counter
|`src_host`, `dst_host`, `state`, `error_code`, `error_type`, `expired`, `retransmits`
|Call attempts

|`sip_call_duration`
|Timer
|`src_host`, `dst_host`, `state`, `error_code`, `error_type`, `expired`, `retransmits`
|Call duration

|`sip_call_established`
|Counter
|`src_host`, `dst_host`, `retransmits`
|Established calls

|`sip_call_trying-delay`
|Timer
|`src_host`, `dst_host`, `retransmits`
|The time interval between initial `INVITE` message and corresponding `100` response

|`sip_call_setup-time`
|Timer
|`src_host`, `dst_host`, `retransmits`
|The time interval between initial `INVITE` message and corresponding `18x` response

|`sip_call_establish-time`
|Timer
|`src_host`, `dst_host`, `retransmits`
|The time interval between initial `INVITE` message and corresponding `200` response

|`sip_call_disconnect-time`
|Timer
|`src_host`, `dst_host`, `retransmits`
|The time interval between the first `BYE` message and corresponding `200` response.

|====================

== RTP/RTCP Metrics

The list below contains entire set of RTP/RTCP QoS metrics aggregated and reported by SIP3. 

[%header,cols=4*]
|====================
|Name
|Type
|Tags
|Description

|`rtpr_rtp_mos`, `rtpr_rtcp_mos`
|Summary
|`src_host`, `dst_host`, `codec`
|Mean opinion score

|`rtpr_rtp_r-factor`, `rtpr_rtcp_r-factor`
|Summary
|`src_host`, `dst_host`, `codec`
|R-Factor

|`rtpr_rtp_duration`, `rtpr_rtcp_duration`
|Timer
|`src_host`, `dst_host`, `codec`
|Call media duration

|`rtpr_rtp_jitter`, `rtpr_rtcp_jitter`
|Summary
|`src_host`, `dst_host`, `codec`
|Average jitter

|`rtpr_rtp_expected-packets`, `rtpr_rtcp_expected-packets`
|Summary
|`src_host`, `dst_host`, `codec`
|Expected RTP packets

|`rtpr_rtp_lost-packets`, `rtpr_rtcp_lost-packets`
|Summary
|`src_host`, `dst_host`, `codec`
|Lost RTP packets


|`rtpr_rtp_rejected-packets`, `rtpr_rtcp_rejected-packets`
|Summary
|`src_host`, `dst_host`, `codec`
|Rejected RTP packets
|====================


