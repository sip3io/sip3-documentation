= Metrics

:description: SIP3 Metrics.

== Overview

Nowadays every DevOps and Service Reliability Engineer is familiar with the link:[Visibility] concept. Often times Visibility starts with the ability of the maintenance team to react immediately on any service disruption. That is why it is very important to design your system having proper monitoring tools in mind. // TODO - Need a better statement backup

This document will get you in touch with the http://micrometer.io/[Micrometer], framework which allows SIP3 to ship metrics to different backends. Also, below you can find a list of all avaialble Service Metrics.

== Micrometer

TODO
- expensive to bring another monitoring tool for the support team;
- we want to give them service metrics whilte utilizing their own backend;
- micrometer is the tool of choice to deliver those metrics to many different backends
- SIP is utilizing Micrometer's metric types

== SIP Metrics

TODO
- list of all available sip metrics, based on RFC - 6076;


[%header,cols=4*]
|====================
|Name
|Type
|Tags
|Description

|`sip_call_messages`
|Counter
|`src_host`, `dst_host`, `cseq_method`, `method`, `status_code`, `status_type`
|Call messages

|`sip_call_attempts`
|Counter
|`src_host`, `dst_host`, `state`, `error_code`, `error_type`, `expired`, `retransmits`
|Call attempts

|`sip_call_duration`
|Timer
|`src_host`, `dst_host`, `state`, `error_code`, `error_type`, `expired`, `retransmits`
|Call duration

|`sip_call_approaching`
|Counter
|`src_host`, `dst_host`, `retransmits`
|Approaching calls

|`sip_call_established`
|Counter
|`src_host`, `dst_host`, `retransmits`
|Established calls

|`sip_call_trying-delay`
|Timer
|`src_host`, `dst_host`, `retransmits`
|The time interval between initial `INVITE` message and corresponding `100` response

|`sip_call_setup-time`
|Timer
|`src_host`, `dst_host`, `retransmits`
|The time interval between initial `INVITE` message and corresponding `18x` response

|`sip_call_establish-time`
|Timer
|`src_host`, `dst_host`, `retransmits`
|The time interval between initial `INVITE` message and corresponding `200` response

|`sip_call_disconnect-time`
|Timer
|`src_host`, `dst_host`, `retransmits`
|The time interval between the first `BYE` message and corresponding `200` response.

|====================

== RTP/RTCP Metrics

TODO...

[%header,cols=4*]
|====================
|Name
|Type
|Tags
|Description

|`rtpr_(rtp/rtcp)_mos`
|Summary
|`src_host`, `dst_host`, `codec`
|Mean opinion score

|`rtpr_(rtp/rtcp)_r-factor`
|Summary
|`src_host`, `dst_host`, `codec`
|R-Factor

|`rtpr_(rtp/rtcp)_duration`
|Timer
|`src_host`, `dst_host`, `codec`
|Call media duration

|`rtpr_(rtp/rtcp)_jitter`
|Summary
|`src_host`, `dst_host`, `codec`
|Average jitter

|`rtpr_(rtp/rtcp)_expected-packets`
|Summary
|`src_host`, `dst_host`, `codec`
|Expected RTP packets

|`rtpr_(rtp/rtcp)_lost-packets`
|Summary
|`src_host`, `dst_host`, `codec`
|Lost RTP packets


|`rtpr_(rtp/rtcp)_rejected-packets`
|Summary
|`src_host`, `dst_host`, `codec`
|Rejected RTP packets

|====================


